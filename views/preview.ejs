<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Preview Hasil Foto</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- icons bootstrap -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
<style>
  body {
    font-family: 'Inter', sans-serif;
  }

  /* Grid container */
  .photo-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 10px;
    margin-top: 20px;
  }

  /* Thumbnail images */
  .photo-grid img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    padding: 3px;
    border: 1px solid #ccc;
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: pointer;
  }

  /* Hover effect */
  .photo-grid img:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }

  .photo-name {
    font-size: 0.8rem;
    text-align: center;
    margin-top: 0.2rem;
    word-break: break-word;
  }

  #downloadBtn {
    display: inline-block;
    margin-top: 20px;
    padding: 8px 15px;
    background: #ffc107;
    color: #000;
    text-decoration: none;
    border-radius: 5px;
    font-weight: 500;
    transition: background 0.2s;
  }

  #downloadBtn:hover {
    background: #e0a800;
    color: #fff;
  }
</style>
</head>
<body style="font-family: 'Inter', sans-serif;">
  <!-- Navbar -->
  <%- include('components/navbar') %>

  <div class="container mt-4 min-vh-100">
    <h4 class="fw-bold mb-3">Preview Foto Siap Download</h4>
    <a href="/download" id="downloadBtn" style="margin-top: -1rem;"><i class="bi bi-arrow-down-circle-fill"></i> Download Semua</a>
    <% if (files.length > 0) { %>
      <div class="photo-grid">
        <% files.forEach(file => { %>
          <div>
            <img src="/output/<%= file %>" alt="<%= file %>">
            <div class="photo-name">
  <%= file.length > 10 ? file.slice(0, 10) + '...' : file %>
</div>

          </div>
        <% }) %>
      </div>

      
    <% } else { %>
      <p>Tidak ada file di folder output</p>
    <% } %>
  </div>

<%- include('components/footer')%>
<script>
  const downloadBtn = document.getElementById('downloadBtn');
  if(downloadBtn){
    downloadBtn.addEventListener('click', () => {
      setTimeout(() => {
        window.location.href = '/';
      }, 2000); // redirect ke home 2 detik setelah klik
    });
  }
</script>
</body>
</html>
